---
phase: v3-03
plan: 02
name: Types Cleanup & Verify
wave: 1
depends_on: ["v3-03-01"]
autonomous: true
parallel_safe: sequential_only
estimated_time: 10min
---

# Phase v3-03 Plan 02: Types Cleanup & Verify

## Objective

Verify and clean up MATCH type locations and exports. Most work was already completed during Plan 01 execution — this plan confirms correctness and removes any leftover unused import.

## Context

**Requirements addressed:** T-03 (partial), BEG-07 (types cleanup)
**Phase goal contribution:** Ensures MATCH types are properly shared, not local to rest.ts.

**Already completed by Plan 01:**
- ✅ `MatchQueryOptions`, `MatchQueryResultItem`, `MatchQueryResponse` in `types.ts`
- ✅ `matchQuery()` in `IVelesDBBackend` interface
- ✅ `matchQuery()` in `VelesDB` client with validation + JSDoc
- ✅ `WasmBackend` stub throws "not supported"
- ✅ `similarity()` + `orderBySimilarity()` in `VelesQLBuilder`
- ✅ `index.ts` exports via `export * from './types'`
- ✅ Server-internal types (`ServerMatchQueryResponse`, etc.) stay in `rest.ts`

## Tasks

### Task 1: Verify type locations and remove unused import

**Files:** `sdks/typescript/src/backends/rest.ts`, `sdks/typescript/src/types.ts`
**Action:**
- Confirm `rest.ts` imports `MatchQueryOptions`, `MatchQueryResponse` from `../types` (not local)
- Confirm `rest.ts` has NO public `export interface Match*` definitions (only `ServerMatch*` internal)
- Remove the unused `MatchQueryResultItem` import that user already cleaned up
- Confirm `types.ts` exports all 3 MATCH types
**Verify:** `npx tsc --noEmit`
**Done:** Zero duplicate type definitions, clean imports

### Task 2: Full verification

**Action:** Run complete test suite to confirm no regressions
**Verify:**
```powershell
cd sdks/typescript
npx tsc --noEmit
npx vitest run
```
**Done:** Zero type errors, all 151+ tests pass

## Verification

```powershell
cd sdks/typescript
npx tsc --noEmit && npx vitest run
```

## Success Criteria

- [ ] MATCH types exported from `types.ts` only (not duplicated in `rest.ts`)
- [ ] `matchQuery()` in `IVelesDBBackend` interface
- [ ] `matchQuery()` accessible via `VelesDB` client
- [ ] VelesQLBuilder has `similarity()` and `orderBySimilarity()` methods
- [ ] All existing tests pass
- [ ] Zero unused imports

## Parallel Safety

**Exclusive write files:** `sdks/typescript/src/backends/rest.ts` (cleanup only)
**Shared read files:** `sdks/typescript/src/types.ts`, `sdks/typescript/src/client.ts`
**Conflicts with:** Plan 03 (both touch types.ts, rest.ts) → sequential_only

## Output

**Files modified:**
- `sdks/typescript/src/backends/rest.ts` — Remove unused import (if any)
